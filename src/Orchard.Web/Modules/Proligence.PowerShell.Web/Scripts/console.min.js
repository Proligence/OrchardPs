function LoadConsole(){function a(n){i.show();i.progressbar("value",100);e.text(l+" "+n);r.send({Command:n})}function y(){a("\x03");i.show();i.progressbar("value",100);e.text("Aborting current command...")}function p(n){return n?n.Output?n.Output:"":""}function v(t){if(t.Results&&t.Results.length!=0){f>=t.Results.length&&(f=0);var r=u.substring(0,t.ReplacementIndex),e=t.Results[f],i=t.ReplacementLength>0?u.substring(t.ReplacementIndex+t.ReplacementLength):"";n.promptText(r+e+i);n.moveCursor(i.length*-1);n.updatePromptDisplay();f++}}function w(r){var f=p(r),h=r.NewLine?!0:!1,u;if(s=r.Prompt?r.Prompt:"> ",f=f.replace(/[\r\n]+$/,"").replace(/(\r\n|\n|\r)/gm,"<br/>").replace(/\s/g,"&nbsp;"),r.Finished)t||o("",""),e.text(l),i.hide();else{if(!t&&o&&o("","jquery-console-message-value"),t=t?t:$(".jquery-console-message").last(),u=$("<span><\/span>").html(f).css("display","inline-block"),r.BackColor&&r.BackColor.toUpperCase()!="BLUE"&&u.css("background-color",r.BackColor),r.ForeColor)u.css("color",r.ForeColor);else switch(r.Type){case 1:u.addClass("jquery-console-message-warning");break;case 2:u.addClass("jquery-console-message-error");break;case 3:u.addClass("jquery-console-message-debug");break;case 4:u.addClass("jquery-console-message-verbose");break;default:u.addClass("jquery-console-message-value")}t.append(u);h&&t.append("<\/br>")}$(".jquery-console-prompt-label").last().text(s);n.scrollToBottom()}var f=0,u="",h,o,c=$('<div class="console">'),t,s,n=c.console({continuedPrompt:!0,promptLabel:function(){return s?s:"> "},commandValidate:function(){return!0},commandHandle:function(i,r){i.trim().toUpperCase()==="CLS"?n.reset():(t=null,o=r,a(i))},cancelHandle:function(){y()},completeHandle:function(t){return u.length==0?(u=t,r.send({Command:u,Position:n.cursorPosition(),Completion:!0})):v(h),""},cols:3,autofocus:!0,animateScroll:!0,promptHistory:!0,welcomeMessage:"Orchard PowerShell console\r\nType 'cls' to clear the console\r\n\r\n"}),i=$("#Progress"),e=$(".progress-label"),l=e.text(),r;i.progressbar({value:!1});n.typer.keydown(function(n){var t=n.keyCode;n.keyCode!=9&&(f=0,u="",h=null)});window.$Console=$("#Console");window.$Console.append(c);$("div.jquery-console-inner").css("background-color","#012456");r=$.connection("/conn/commandstream");window.$Console.data("connection",r);n.disableInput();r.logging=!0;r.start({waitForPageLoad:!0,transport:["serverSentEvents","foreverFrame","longPolling"]},function(){n.enableInput()});r.received(function(n){n.Type==6?(h=n.Data,v(n.Data)):n.Type==5?(i.progressbar("value",n.Data.percent),e.text(n.Data.activity+": "+n.Data.status)):w(n)})}$(function(){LoadConsole()});
/*
//# sourceMappingURL=console.min.js.map
*/